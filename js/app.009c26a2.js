(function(e){function t(t){for(var n,o,i=t[0],s=t[1],l=t[2],p=0,d=[];p<i.length;p++)o=i[p],Object.prototype.hasOwnProperty.call(r,o)&&r[o]&&d.push(r[o][0]),r[o]=0;for(n in s)Object.prototype.hasOwnProperty.call(s,n)&&(e[n]=s[n]);u&&u(t);while(d.length)d.shift()();return c.push.apply(c,l||[]),a()}function a(){for(var e,t=0;t<c.length;t++){for(var a=c[t],n=!0,i=1;i<a.length;i++){var s=a[i];0!==r[s]&&(n=!1)}n&&(c.splice(t--,1),e=o(o.s=a[0]))}return e}var n={},r={app:0},c=[];function o(t){if(n[t])return n[t].exports;var a=n[t]={i:t,l:!1,exports:{}};return e[t].call(a.exports,a,a.exports,o),a.l=!0,a.exports}o.m=e,o.c=n,o.d=function(e,t,a){o.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:a})},o.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},o.t=function(e,t){if(1&t&&(e=o(e)),8&t)return e;if(4&t&&"object"===typeof e&&e&&e.__esModule)return e;var a=Object.create(null);if(o.r(a),Object.defineProperty(a,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var n in e)o.d(a,n,function(t){return e[t]}.bind(null,n));return a},o.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return o.d(t,"a",t),t},o.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},o.p="/";var i=window["webpackJsonp"]=window["webpackJsonp"]||[],s=i.push.bind(i);i.push=t,i=i.slice();for(var l=0;l<i.length;l++)t(i[l]);var u=s;c.push([0,"chunk-vendors"]),a()})({0:function(e,t,a){e.exports=a("cd49")},"0492":function(e,t,a){},"0fd2":function(e,t,a){},"18df":function(e,t,a){"use strict";var n=a("458c"),r=a.n(n);r.a},"1dd0":function(e,t,a){"use strict";var n=a("93a9"),r=a.n(n);r.a},"458c":function(e,t,a){},"53c1":function(e,t,a){},"5c0b":function(e,t,a){"use strict";var n=a("9c0c"),r=a.n(n);r.a},"648f":function(e,t,a){"use strict";var n=a("0492"),r=a.n(n);r.a},"6bd7":function(e,t,a){"use strict";var n=a("ac00"),r=a.n(n);r.a},"81b1":function(e,t,a){},8212:function(e,t,a){"use strict";var n=a("81b1"),r=a.n(n);r.a},"93a9":function(e,t,a){},"97af":function(e,t,a){},"9bff":function(e,t,a){"use strict";var n=a("53c1"),r=a.n(n);r.a},"9c0c":function(e,t,a){},ac00:function(e,t,a){},aec9:function(e,t,a){},b314:function(e,t,a){"use strict";var n=a("0fd2"),r=a.n(n);r.a},ca8c:function(e,t,a){"use strict";var n=a("aec9"),r=a.n(n);r.a},cd49:function(e,t,a){"use strict";a.r(t);a("e260"),a("e6cf"),a("cca6"),a("a79d");var n,r,c,o=a("2b0e"),i=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{attrs:{id:"app"}},[a("app-navbar",{attrs:{hide:e.createFactoryPageOpen,fixed:!0}},[e._v("農地違章工廠舉報")]),a("filter-modal",{attrs:{open:e.filterModalOpen,dismiss:e.closeFilterModal}}),a("create-factory-success-modal",{attrs:{open:e.createFactorySuccessModalOpen,dismiss:function(){return e.setCreateFactorySuccessModal(!1)}}}),a("Map",{attrs:{toggleFactoryPage:e.toggleFactoryPage,selectFactoryMode:e.selectFactoryMode,exitSelectFactoryMode:e.exitSelectFactoryMode,setFactoryLocation:e.setFactoryLocation}}),e.createFactoryPageOpen?a("form-page",{attrs:{close:e.closeFactoryPage,selectFactoryMode:e.selectFactoryMode,enterSelectFactoryMode:e.enterSelectFactoryMode,exitSelectFactoryMode:e.exitSelectFactoryMode,factoryLocation:e.factoryLocation,setCreateFactorySuccessModal:e.setCreateFactorySuccessModal}}):e._e()],1)},s=[],l=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"map-container"},[a("div",{ref:"root",staticClass:"map"}),e.selectFactoryMode?a("div",{staticClass:"center-point"}):e._e(),a("div",{staticClass:"factory-button-group"},[e.selectFactoryMode?e._e():a("div",{staticClass:"create-factory-button"},[a("app-button",{on:{click:e.toggleFactoryPage}},[e._v("我要新增違建工廠")])],1),e.selectFactoryMode?a("div",{staticClass:"choose-location-button"},[a("app-button",{attrs:{disabled:!e.factoryValid},on:{click:e.selectCenterPoint}},[e._v(" 選擇此地點 ")])],1):e._e()])])},u=[],p=a("e587"),d=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("button",{class:{outline:e.outline,disabled:e.disabled},on:{click:e.click}},[e._t("default")],2)},f=[],v=a("750b"),m=Object(v["b"])({name:"AppButton",props:{outline:{type:Boolean,default:!1},disabled:{type:Boolean,default:!1}},setup:function(e,t){var a=function(){e.disabled||t.emit("click")};return{click:a}}}),y=m,b=(a("b314"),a("2877")),g=Object(b["a"])(y,d,f,!1,null,"1de9cbd7",null),h=g.exports,x=(a("5bc0"),a("99af"),a("4de4"),a("4160"),a("caad"),a("d81d"),a("13d5"),a("4ec9"),a("4fad"),a("d3b7"),a("2532"),a("3ca3"),a("159b"),a("ddb0"),a("96cf"),a("2fa7")),F=a("9ab4"),O=a("6c77"),w=a("6cbf"),k=a("82b0"),_=a("4cdf"),j=a("5eee"),M=a("a2c7"),S=a("f403"),A=a("d510"),C=a("6ed8"),P=a("256f"),U=a("0af5"),E=a("3e6b"),L=a("480c"),B=a("5831"),I=(a("a630"),a("fb6a"),a("45fc"),window.OffscreenCanvas?new OffscreenCanvas(500,500):document.createElement("canvas")),R=I.getContext("2d"),V=function(e){return function(t){return new Promise((function(a){var n=new Image;n.crossOrigin="",n.src=t,n.style.display="none",n.onload=function(){return Object(F["a"])(void 0,void 0,void 0,regeneratorRuntime.mark((function t(){var r,c,o,i;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return I.width=n.width,I.height=n.height,R.clearRect(0,0,I.width,I.height),R.drawImage(n,0,0),r=R.getImageData(0,0,n.width,n.height),c=r.data,t.next=8,Promise.resolve(e(c));case 8:o=document.createElement("canvas"),i=o.getContext("2d"),o.width=n.width,o.height=n.height,i.putImageData(r,0,0),a(o.toDataURL()),n.remove(),o.remove();case 16:case"end":return t.stop()}}),t)})))}}))}},T=(V((function(e){for(var t=0;t<e.length;t+=4){var a=(e[t]+e[t+1]+e[t+2])/3;e[t]=a,e[t+1]=a,e[t+2]=a}})),[[152,230,0],[209,255,115],[171,220,97],[110,221,97],[233,255,190],[198,230,150],[56,204,61],[200,205,56],[126,237,39],[99,192,59],[170,192,60],[142,169,68],[138,255,218],[159,177,105],[112,134,79],[147,203,62],[168,168,0],[107,144,75],[77,101,57]]),D=function(e,t){return!e.some((function(e,a){return t[a]!==e}))},N=function(e){return T.some((function(t){return D(t,e)}))},q=V((function(e){for(var t=0;t<e.length;t+=4){var a=Array.from(e.slice(t,t+3));N(a)?(e[t]=0,e[t+1]=0,e[t+2]=0,e[t+3]=1):(e[t]=0,e[t+1]=0,e[t+2]=0,e[t+3]=255)}})),$=new Map,G={D:"/images/marker-green.svg",F:"/images/marker-red.svg",A:"/images/marker-blue.svg"},J=Object.entries(G).reduce((function(e,t){var a=Object(p["a"])(t,2),n=a[0],r=a[1];return Object.assign(Object.assign({},e),Object(x["a"])({},n,new O["b"]({image:new w["a"]({anchorYUnits:k["a"].PIXELS,src:r})})))}),{}),X=new O["b"]({}),z=[];function Z(e){return 0===z.length||z.includes(e.status)}function Y(e){var t=Z(e);return t?J[e.status]:X}function H(e){var t=new _["a"]({geometry:new S["a"](Object(P["g"])([e.lng,e.lat],"EPSG:4326","EPSG:3857"))});return t.setId(e.id),t.setStyle(Y(e)),$.set(e.id,e),t}function K(e){var t=e.filter((function(e){return!$.has(e.id)})).map(H);if(n)n.addFeatures(t);else{n=new B["a"]({features:t});var a=new E["a"]({source:n});r.addLayer(a)}}function Q(e){n.getFeatures().forEach((function(t){var a=t.getId(),n=$.get(a);e(t,n)}))}function W(){Q((function(e,t){e.setStyle(J[t.status])}))}function ee(){Q((function(e,t){e.setStyle(Y(t))}))}function te(e){if(n){if(z=e,0===e.length)return W();ee()}}window.setFactoryStatusFilter=te;var ae=function(){for(var e=Object(P["d"])("EPSG:3857"),t=e.getExtent(),a=new Array(20),n=Object(U["E"])(t)/256,r=new Array(20),c=0;c<20;++c)a[c]=n/Math.pow(2,c),r[c]=c;return new C["b"]({origin:Object(U["C"])(t),resolutions:a,matrixIds:r})},ne=function(e){return new L["a"]({source:new A["a"]({matrixSet:"EPSG:3857",format:"image/png",url:"https://wmts.nlsc.gov.tw/wmts",layer:"EMAP",tileGrid:e,crossOrigin:"Anonymous",style:"default",wrapX:!0,attributions:'<a href="https://maps.nlsc.gov.tw/" target="_blank">國土測繪圖資服務雲</a>'}),opacity:.5})},re=function(e){return new L["a"]({source:new A["a"]({matrixSet:"EPSG:3857",format:"image/png",url:"https://wmts.nlsc.gov.tw/wmts/LUIMAP/{Style}/{TileMatrixSet}/{TileMatrix}/{TileRow}/{TileCol}",layer:"LUIMAP",requestEncoding:"REST",tileGrid:e,tileLoadFunction:function(e,t){var a=e.getImage();q(t).then((function(e){a.src=e}))},crossOrigin:"Anonymous",style:"default",wrapX:!0,attributions:'<a href="https://maps.nlsc.gov.tw/" target="_blank">國土測繪圖資服務雲</a>'}),opacity:.5})};function ce(e){return new Promise((function(t){r.forEachLayerAtPixel(e,(function(e,a){var n=Object(p["a"])(a,4),r=n[3];return t(1===r)}),{layerFilter:function(e){return"LUIMAP"===e.getProperties().source.layer_}})}))}function oe(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},a=ae();c=e,r=new j["a"]({target:e,layers:[ne(a),re(a)],view:new M["a"]({center:Object(P["g"])([120.1,23.234],"EPSG:4326","EPSG:3857"),zoom:15})}),r.on("click",(function(e){r.forEachLayerAtPixel(e.pixel,(function(e,t){var a=Object(p["a"])(t,4),n=a[0],r=a[1],c=a[2],o=a[3];console.log("rgba(".concat(n,", ").concat(r,", ").concat(c,", ").concat(o,")"))}),{layerFilter:function(e){return"LUIMAP"===e.getProperties().source.layer_}})})),r.on("moveend",(function(){return Object(F["a"])(this,void 0,void 0,regeneratorRuntime.mark((function e(){var a,n,o,i,s,l,u,d,f,v,m,y,b;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return a=r.getView(),n=a.getZoom(),o=a.getResolutionForZoom(n),i=Math.ceil(o),s=Object(P["g"])(a.getCenter(),"EPSG:3857","EPSG:4326"),l=Object(p["a"])(s,2),u=l[0],d=l[1],e.next=7,fetch("/server/api/factories?range=".concat(i,"&lng=").concat(u,"&lat=").concat(d));case 7:return f=e.sent,e.next=10,f.json();case 10:if(v=e.sent,K(v),!t.onMoved){e.next=20;break}return m=c.getBoundingClientRect(),y=m.width,b=m.height,e.t0=t,e.t1=[u,d],e.next=18,ce([y/2,b/2]);case 18:e.t2=e.sent,e.t0.onMoved.call(e.t0,e.t1,e.t2);case 20:case"end":return e.stop()}}),e)})))})),window.map=r}var ie=Object(v["b"])({components:{AppButton:h},props:{toggleFactoryPage:{type:Function,required:!0},selectFactoryMode:{type:Boolean,required:!0},exitSelectFactoryMode:{type:Function,required:!0},setFactoryLocation:{type:Function,required:!0}},setup:function(e){var t=Object(v["e"])(null),a=Object(v["e"])(!1),n=Object(v["e"])([]);return Object(v["d"])((function(){oe(t.value,{onMoved:function(e,t){var r=Object(p["a"])(e,2),c=r[0],o=r[1];n.value=[c,o],a.value=t}})})),{root:t,factoryValid:a,selectCenterPoint:function(){e.setFactoryLocation(n.value),e.exitSelectFactoryMode()}}}}),se=ie,le=(a("648f"),Object(b["a"])(se,l,u,!1,null,"dc9a5030",null)),ue=le.exports,pe=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("nav",{class:{dark:e.dark,fixed:e.fixed,hide:e.hide}},[a("div",{directives:[{name:"show",rawName:"v-show",value:!e.dark,expression:"!dark"}],staticClass:"back-button",on:{click:function(t){return e.onBackClick()}}},[a("span"),a("span"),a("span")]),a("div",{directives:[{name:"show",rawName:"v-show",value:e.dark,expression:"dark"}],staticClass:"back-placeholder"}),e._t("default"),a("div",{staticClass:"menu-button",on:{click:function(t){return e.onMenuClick()}}},[a("span"),a("span"),a("span")])],2)},de=[],fe=Object(v["b"])({name:"AppNavbar",props:{dark:{type:Boolean,default:!0},fixed:{type:Boolean,default:!1},back:{type:Function},hide:{type:Boolean,default:!1}},setup:function(e,t){e.back;var a=t.emit;return{onBackClick:function(){a("back")},onMenuClick:function(){a("menu")}}}}),ve=fe,me=(a("f158"),Object(b["a"])(ve,pe,de,!1,null,"ed0cfed2",null)),ye=me.exports,be=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("app-modal",{attrs:{open:e.open,dismiss:e.dismiss}},[a("h1",[e._v("篩選")]),a("label",[a("input",{directives:[{name:"model",rawName:"v-model",value:e.filterF,expression:"filterF"}],attrs:{type:"checkbox",name:"F"},domProps:{checked:Array.isArray(e.filterF)?e._i(e.filterF,null)>-1:e.filterF},on:{change:function(t){var a=e.filterF,n=t.target,r=!!n.checked;if(Array.isArray(a)){var c=null,o=e._i(a,c);n.checked?o<0&&(e.filterF=a.concat([c])):o>-1&&(e.filterF=a.slice(0,o).concat(a.slice(o+1)))}else e.filterF=r}}}),e._v(" 資料不全 ")]),a("label",[a("input",{directives:[{name:"model",rawName:"v-model",value:e.filterA,expression:"filterA"}],attrs:{type:"checkbox",name:"A"},domProps:{checked:Array.isArray(e.filterA)?e._i(e.filterA,null)>-1:e.filterA},on:{change:function(t){var a=e.filterA,n=t.target,r=!!n.checked;if(Array.isArray(a)){var c=null,o=e._i(a,c);n.checked?o<0&&(e.filterA=a.concat([c])):o>-1&&(e.filterA=a.slice(0,o).concat(a.slice(o+1)))}else e.filterA=r}}}),e._v(" 資料齊全 ")]),a("label",[a("input",{directives:[{name:"model",rawName:"v-model",value:e.filterD,expression:"filterD"}],attrs:{type:"checkbox",name:"D"},domProps:{checked:Array.isArray(e.filterD)?e._i(e.filterD,null)>-1:e.filterD},on:{change:function(t){var a=e.filterD,n=t.target,r=!!n.checked;if(Array.isArray(a)){var c=null,o=e._i(a,c);n.checked?o<0&&(e.filterD=a.concat([c])):o>-1&&(e.filterD=a.slice(0,o).concat(a.slice(o+1)))}else e.filterD=r}}}),e._v(" 已舉報 ")]),a("app-button",{on:{click:function(t){return e.onClick()}}},[e._v("確認")])],1)},ge=[],he=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"app-modal-component",class:{open:e.open}},[a("div",{staticClass:"app-modal-backdrop",on:{click:e.dismiss}}),a("div",{staticClass:"app-modal"},[e.showCloseButon?a("div",{staticClass:"close",on:{click:e.dismiss}}):e._e(),e._t("default")],2)])},xe=[],Fe=Object(v["b"])({name:"AppModal",props:{open:{type:Boolean,default:!1},dismiss:{type:Function},showCloseButon:{type:Boolean,default:!0}}}),Oe=Fe,we=(a("18df"),Object(b["a"])(Oe,he,xe,!1,null,"41371de6",null)),ke=we.exports,_e=Object(v["b"])({name:"FilterModal",components:{AppModal:ke,AppButton:h},props:{open:{type:Boolean,default:!1},dismiss:{type:Function}},setup:function(e,t){var a=Object(v["e"])(!1),n=Object(v["e"])(!1),r=Object(v["e"])(!1);return{filterF:a,filterA:n,filterD:r,onClick:function(){te([!!a.value&&"F",!!n.value&&"A",!!r.value&&"D"].filter(Boolean)),"function"===typeof e.dismiss&&e.dismiss()}}}}),je=_e,Me=Object(b["a"])(je,be,ge,!1,null,null,null),Se=Me.exports,Ae=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("app-modal",{attrs:{open:e.open,dismiss:e.dismiss,showCloseButon:!1}},[a("h3",[e._v("感謝您新增資訊！")]),a("app-button",{on:{click:e.dismiss}},[e._v("確認")])],1)},Ce=[],Pe=Object(v["b"])({name:"CreateFactorySuccessModal",components:{AppModal:ke,AppButton:h},props:{open:{type:Boolean,default:!1},dismiss:{type:Function}}}),Ue=Pe,Ee=(a("1dd0"),Object(b["a"])(Ue,Ae,Ce,!1,null,"3a2dc7d4",null)),Le=Ee.exports,Be=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("div",{staticClass:"navbar-container"},[a("app-navbar",{attrs:{dark:!1,fixed:!0},on:{back:e.onNavBack}},[e._v("新增資訊")])],1),a("div",{staticClass:"page-container",class:{hide:e.selectFactoryMode}},[a("image-upload-modal",{attrs:{open:e.imageUploadModalOpen,dismiss:e.closeImageUploadModal,images:e.imagesToUpload,finishImagesUpload:e.finishImagesUpload,finishUploaderForm:e.finishUploaderForm}}),a("div",{staticClass:"page",staticStyle:{padding:"29px 35px"}},[a("h1",[e._v("輸入資訊")]),a("h3",[e._v("工廠地點")]),e._v(" "+e._s(JSON.stringify(e.factoryLocation))+" "),a("app-button",{on:{click:function(t){return e.enterSelectFactoryMode()}}},[e._v("點我選擇")]),a("div",{staticClass:"flex justify-between",staticStyle:{"margin-top":"40px"}},[e._m(0),a("div",[a("label",[a("input",{ref:"image",staticStyle:{display:"none"},attrs:{multiple:"",type:"file",accept:"image/*"},on:{change:e.handleImagesUpload}}),a("app-button",{on:{click:function(t){return e.image.click()}}},[e._v("新增")])],1)])]),a("div",{staticClass:"images-grid"},e._l(e.imageUrls,(function(e){return a("div",{key:e,staticClass:"image-card"},[a("img",{attrs:{src:e}})])})),0),a("h3",[e._v("工廠名稱")]),a("app-text-field",{attrs:{placeholder:"請輸入工廠名稱"},model:{value:e.factoryName,callback:function(t){e.factoryName=t},expression:"factoryName"}}),a("h3",[e._v("工廠類型")]),a("app-select",{attrs:{items:e.factoryTypeItems},model:{value:e.factoryType,callback:function(t){e.factoryType=t},expression:"factoryType"}}),a("h3",[e._v("新增其它資訊")]),a("app-text-field",{attrs:{placeholder:"請填入其他資訊，如聲音、氣味等等。"},model:{value:e.factoryDescription,callback:function(t){e.factoryDescription=t},expression:"factoryDescription"}}),a("div",{staticClass:"text-center width-auto",staticStyle:{"margin-top":"60px","margin-bottom":"55px"}},[a("app-button",{on:{click:function(t){return e.submitFactory()}}},[e._v("送出")])],1)],1)],1)])},Ie=[function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"flex flex-column flex-auto"},[a("h3",{staticStyle:{"margin-top":"0"}},[e._v("工廠照片*")]),a("label",[a("small",[e._v("請上傳至少一張照片")])])])}],Re=(a("2b3d"),a("284c")),Ve=function(){var e=this,t=e.$createElement,a=e._self._c||t;return"checkbox"===e.type?a("input",e._b({directives:[{name:"model",rawName:"v-model",value:e.inputValue,expression:"inputValue"}],attrs:{type:"checkbox"},domProps:{checked:Array.isArray(e.inputValue)?e._i(e.inputValue,null)>-1:e.inputValue},on:{change:function(t){var a=e.inputValue,n=t.target,r=!!n.checked;if(Array.isArray(a)){var c=null,o=e._i(a,c);n.checked?o<0&&(e.inputValue=a.concat([c])):o>-1&&(e.inputValue=a.slice(0,o).concat(a.slice(o+1)))}else e.inputValue=r}}},"input",e.$attrs,!1)):"radio"===e.type?a("input",e._b({directives:[{name:"model",rawName:"v-model",value:e.inputValue,expression:"inputValue"}],attrs:{type:"radio"},domProps:{checked:e._q(e.inputValue,null)},on:{change:function(t){e.inputValue=null}}},"input",e.$attrs,!1)):a("input",e._b({directives:[{name:"model",rawName:"v-model",value:e.inputValue,expression:"inputValue"}],attrs:{type:e.type},domProps:{value:e.inputValue},on:{input:function(t){t.target.composing||(e.inputValue=t.target.value)}}},"input",e.$attrs,!1))},Te=[],De=Object(v["b"])({name:"AppTextField",props:{type:{type:String,default:"text"},value:{type:String,required:!0}},setup:function(e,t){var a=Object(v["a"])({get:function(){return e.value},set:function(e){return t.emit("input",e)}});return{inputValue:a}}}),Ne=De,qe=(a("6bd7"),Object(b["a"])(Ne,Ve,Te,!1,null,"1dc8b942",null)),$e=qe.exports,Ge=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"select"},[a("select",e._b({directives:[{name:"model",rawName:"v-model",value:e.inputValue,expression:"inputValue"}],on:{change:function(t){var a=Array.prototype.filter.call(t.target.options,(function(e){return e.selected})).map((function(e){var t="_value"in e?e._value:e.value;return t}));e.inputValue=t.target.multiple?a:a[0]}}},"select",e.$attrs,!1),e._l(e.items,(function(t){return a("option",{key:t.value,domProps:{value:t.value}},[e._v(" "+e._s(t.text)+" ")])})),0)])},Je=[],Xe=Object(v["b"])({name:"AppSelect",props:{value:{type:null,required:!0},items:{type:Array,required:!0}},setup:function(e,t){var a=Object(v["a"])({get:function(){return e.value},set:function(e){return t.emit("input",e)}});return{inputValue:a}}}),ze=Xe,Ze=(a("ca8c"),Object(b["a"])(ze,Ge,Je,!1,null,"6fad94c0",null)),Ye=Ze.exports,He=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("app-modal",{staticClass:"page",attrs:{open:e.open,dismiss:e.dismiss}},[a("h2",[e._v("工廠照片")]),a("div",{staticClass:"images-grid"},e._l(e.imageUrls,(function(e){return a("div",{key:e,staticClass:"image-card"},[a("img",{attrs:{src:e}})])})),0),a("h2",[e._v(" 聯絡資訊（非必填）"),a("br"),a("small",{staticStyle:{"font-size":"14px"}},[e._v("如果對於照片有疑問，我們會透過您提供的資訊聯絡你。")])]),a("h3",[e._v("稱呼")]),a("app-text-field",{attrs:{placeholder:"例：林先生"},model:{value:e.nickname,callback:function(t){e.nickname=t},expression:"nickname"}}),a("h3",[e._v("聯絡資料")]),a("app-text-field",{attrs:{placeholder:"例：0912345678"},model:{value:e.contact,callback:function(t){e.contact=t},expression:"contact"}}),a("div",{staticStyle:{"margin-top":"35px"}},[a("app-button",{on:{click:function(t){return e.handleImagesUpload()}}},[e._v("上傳照片")])],1)],1)},Ke=[],Qe=(a("a4d3"),a("e01a"),a("d28b"),a("bc3a")),We=a.n(Qe),et=We.a.create({baseURL:"/server/api"});function tt(e){return Object(F["a"])(this,void 0,void 0,regeneratorRuntime.mark((function t(){var a,n,r,c,o,i,s,l,u,p;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:a=[],n=!0,r=!1,c=void 0,t.prev=4,o=e[Symbol.iterator]();case 6:if(n=(i=o.next()).done){t.next=18;break}return s=i.value,l=new FormData,l.append("image",s),t.next=12,et.post("/images",l,{headers:{"Content-Type":"multipart/form-data"}});case 12:u=t.sent,p=u.data,a.push({token:p.token,src:URL.createObjectURL(s)});case 15:n=!0,t.next=6;break;case 18:t.next=24;break;case 20:t.prev=20,t.t0=t["catch"](4),r=!0,c=t.t0;case 24:t.prev=24,t.prev=25,n||null==o.return||o.return();case 27:if(t.prev=27,!r){t.next=30;break}throw c;case 30:return t.finish(27);case 31:return t.finish(24);case 32:return t.abrupt("return",a);case 33:case"end":return t.stop()}}),t,null,[[4,20,24,32],[25,,27,31]])})))}function at(e){return Object(F["a"])(this,void 0,void 0,regeneratorRuntime.mark((function t(){var a,n;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,et.post("/factories",JSON.stringify(e),{headers:{"Content-Type":"application/json"}});case 3:return a=t.sent,n=a.data,t.abrupt("return",n);case 8:throw t.prev=8,t.t0=t["catch"](0),console.error(t.t0),new TypeError("Create factory failed");case 12:case"end":return t.stop()}}),t,null,[[0,8]])})))}var nt=Object(v["b"])({name:"FilterModal",components:{AppModal:ke,AppButton:h,AppTextField:$e},props:{open:{type:Boolean,default:!1},dismiss:{type:Function,required:!0},images:{type:FileList},finishImagesUpload:{type:Function,required:!0},finishUploaderForm:{type:Function,required:!0}},setup:function(e,t){var a=Object(v["e"])(""),n=Object(v["e"])(""),r=Object(v["a"])((function(){for(var t=[],a=0;a<e.images.length;a++)t.push(URL.createObjectURL(e.images[a]));return t}));return{nickname:a,contact:n,imageUrls:r,handleImagesUpload:function(){return Object(F["a"])(this,void 0,void 0,regeneratorRuntime.mark((function t(){var r;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,tt(e.images);case 2:r=t.sent,e.finishImagesUpload(r),e.finishUploaderForm(a.value,n.value),e.dismiss();case 6:case"end":return t.stop()}}),t)})))}}}}),rt=nt,ct=(a("9bff"),Object(b["a"])(rt,He,Ke,!1,null,"33c296d1",null)),ot=ct.exports,it={1:"金屬","2-1":"沖床、銑床、車床、鏜孔","2-2":"焊接、鑄造、熱處理","2-3":"金屬表面處理、噴漆",3:"塑膠加工、射出",4:"橡膠加工",5:"非金屬礦物（石材）",6:"食品",7:"皮革",8:"紡織",9:"其他"},st=Object(v["b"])({name:"FormPage",components:{AppButton:h,AppTextField:$e,AppSelect:Ye,AppNavbar:ye,ImageUploadModal:ot},props:{close:{type:Function,required:!0},selectFactoryMode:{type:Boolean,required:!0},enterSelectFactoryMode:{type:Function,required:!0},exitSelectFactoryMode:{type:Function,required:!0},factoryLocation:{type:Array,required:!0},setCreateFactorySuccessModal:{type:Function,required:!0}},setup:function(e){var t=Object(v["e"])(""),a=Object(v["e"])(0),n=[{text:"請選擇工廠類型",value:0}].concat(Object(Re["a"])(Object.entries(it).map((function(e){var t=Object(p["a"])(e,2),a=t[0],n=t[1];return{text:n,value:a}})))),r=Object(v["e"])(""),c=Object(v["e"])(!1),o=function(){c.value=!1},i=function(){c.value=!0},s=Object(v["e"])([]),l=Object(v["e"])([]),u=Object(v["e"])(null),d=Object(v["a"])((function(){for(var e=[],t=0;t<s.value.length;t++)e.push(URL.createObjectURL(s.value[t]));return e})),f=Object(v["e"])(""),m=Object(v["e"])(""),y=function(e,t){f.value=e,m.value=t};return{factoryName:t,factoryType:a,factoryTypeItems:n,factoryDescription:r,containerStyle:{width:"100%"},imageUploadModalOpen:c,openImageUploadModal:i,closeImageUploadModal:o,imageUrls:d,imagesToUpload:s,image:u,handleImagesUpload:function(e){s.value=e.target.files,i()},finishImagesUpload:function(e){l.value=e},onNavBack:function(){e.close(),e.exitSelectFactoryMode()},submitFactory:function(){return Object(F["a"])(this,void 0,void 0,regeneratorRuntime.mark((function n(){var c,o,i,s,u;return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:return n.prev=0,c=Object(p["a"])(e.factoryLocation,2),o=c[0],i=c[1],s={name:t.value,lng:o,lat:i,type:a.value,other:r.value,images:l.value.map((function(e){return e.token})),nickname:f.value,contact:m.value},console.log(s),n.next=6,at(s);case 6:u=n.sent,K([u]),n.next=12;break;case 10:n.prev=10,n.t0=n["catch"](0);case 12:e.close(),e.exitSelectFactoryMode(),console.log(e.setCreateFactorySuccessModal),e.setCreateFactorySuccessModal(!0);case 16:case"end":return n.stop()}}),n,null,[[0,10]])})))},finishUploaderForm:y}}}),lt=st,ut=(a("8212"),Object(b["a"])(lt,Be,Ie,!1,null,"8457eb0a",null)),pt=ut.exports,dt=Object(v["b"])({name:"App",components:{Map:ue,AppButton:h,AppNavbar:ye,FilterModal:Se,CreateFactorySuccessModal:Le,FormPage:pt},setup:function(){var e=Object(v["e"])(!1),t=function(){e.value=!1},a=Object(v["e"])(!1),n=function(){a.value=!a.value},r=function(){a.value=!1},c=Object(v["e"])([]),o=function(e){c.value=e},i=Object(v["e"])(!1),s=function(){i.value=!0},l=function(){i.value=!1},u=Object(v["e"])(!1),p=function(e){u.value=e};return{filterModalOpen:e,closeFilterModal:t,createFactorySuccessModalOpen:u,setCreateFactorySuccessModal:p,createFactoryPageOpen:a,toggleFactoryPage:n,closeFactoryPage:r,selectFactoryMode:i,enterSelectFactoryMode:s,exitSelectFactoryMode:l,factoryLocation:c,setFactoryLocation:o}}}),ft=dt,vt=(a("5c0b"),Object(b["a"])(ft,i,s,!1,null,null,null)),mt=vt.exports;o["a"].config.productionTip=!1,o["a"].use(v["c"]),new o["a"]({render:function(e){return e(mt)}}).$mount("#app")},f158:function(e,t,a){"use strict";var n=a("97af"),r=a.n(n);r.a}});
//# sourceMappingURL=app.009c26a2.js.map